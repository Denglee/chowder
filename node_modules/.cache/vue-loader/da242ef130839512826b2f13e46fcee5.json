{"remainingRequest":"E:\\project\\chowder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\chowder\\src\\components\\layout\\TagNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\chowder\\src\\components\\layout\\TagNav.vue","mtime":1578032335547},{"path":"E:\\project\\chowder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project\\chowder\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\project\\chowder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project\\chowder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTY3JvbGxCYXIgZnJvbSAnLi9TY3JvbGxCYXInCmltcG9ydCB7bWFwU3RhdGUsbWFwQWN0aW9ucywgbWFwR2V0dGVyc30gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRlZmF1bHRQYWdlOiAnL2luZGV4JwogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewoKICAgICAgICAuLi5tYXBTdGF0ZSgnU3RvcmVBY3RpdmVOYXYnLFsgLy/nlKhtYXBHZXR0ZXJz5p2l6I635Y+WY29sbGVjdGlvbi5qc+mHjOmdoueahGdldHRlcnMKICAgICAgICAgICAgJ29wZW5lZFBhZ2VMaXN0JywKICAgICAgICBdKSwKCiAgICAgICAgdGFnTmF2TGlzdCgpewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuU3RvcmVBY3RpdmVOYXYub3BlbmVkUGFnZUxpc3QKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIC8vIOmmluasoeWKoOi9veaXtuWwhum7mOiupOmhtemdouWKoOWFpee8k+WtmAogICAgICAgIHRoaXMuYWRkVGFnTmF2KCk7CgoKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIC8vIHRoaXMuJHJvdXRlci5nbygwKTsKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgICRyb3V0ZSgpewogICAgICAgICAgICB0aGlzLmFkZFRhZ05hdigpOwogICAgICAgICAgICAvLyB0aGlzLnNjcm9sbFRvQ3VyVGFnKCkKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewoKICAgICAgICAvKui3r+eUsei3s+i9rCDliLfmlrAqLwogICAgICAgIHJlbG9hZFJvdXRlcihlKSB7CiAgICAgICAgICAgIGxldCBwYXRoID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdQYXRoJyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhdGgpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgICAgICBwYXRoOiAiL3JlZGlyZWN0IiwKICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgICAgbmV4dFBhdGg6IHBhdGgKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgLy8gcmVsb2FkUm91dGVyKGUpewogICAgICAgIC8vICAgICBsZXQgUGF0aCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnUGF0aCcpOwogICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhQYXRoKTsKICAgICAgICAvLyAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6UGF0aH0pOwogICAgICAgIC8vICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgIC8vIH0sCgogICAgICAgIGFkZFRhZ05hdigpewogICAgICAgICAgICAvLyDlpoLmnpzpnIDopoHnvJPlrZjliJnlv4Xpobvkvb/nlKjnu4Tku7boh6rouqvnmoRuYW1l77yM6ICM5LiN5pivcm91dGVy55qEbmFtZQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlN0b3JlQWN0aXZlTmF2L2FkZFRhZ05hdiIsIHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuJHJvdXRlci5uYW1lLAogICAgICAgICAgICAgICAgcGF0aDogdGhpcy4kcm91dGUucGF0aCwKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLiRyb3V0ZS5tZXRhLnRpdGxlCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBpc0FjdGl2ZShpdGVtKXsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gdGhpcy4kcm91dGUucGF0aAogICAgICAgIH0sCiAgICAgICAgY2xvc2VUaGVUYWcoaXRlbSwgaW5kZXgpewogICAgICAgICAgICAvLyDlvZPlhbPpl63lvZPliY3pobXpnaLnmoRUYWfml7bvvIzliJnoh6rliqjliqDovb3liY3kuIDkuKpUYWfmiYDlsZ7nmoTpobXpnaIKICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5YmN5LiA5LiqVGFn77yM5YiZ5Yqg6L296buY6K6k6aG16Z2iCgogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgICAgY29uc29sZS5sb2coaW5kZXgpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRhZ05hdkxpc3QpOwoKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJTdG9yZUFjdGl2ZU5hdi9yZW1vdmVUYWdOYXYiLCBpdGVtKQogICAgICAgICAgICBpZih0aGlzLiRyb3V0ZS5wYXRoID09IGl0ZW0ucGF0aCl7CiAgICAgICAgICAgICAgICBpZihpbmRleCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy50YWdOYXZMaXN0W2luZGV4LTFdLnBhdGgpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuZGVmYXVsdFBhZ2UpOwogICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuJHJvdXRlLnBhdGggPT0gIi9pbmRleCIpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRhZ05hdigpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzY3JvbGxUb0N1clRhZygpewogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PnsKICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy4kcmVmcy50YWcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50byA9PT0gdGhpcy4kcm91dGUucGF0aCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnNjcm9sbEJhci5zY3JvbGxUb0N1clRhZyhpdGVtLiRlbCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHtTY3JvbGxCYXJ9Cn0K"},{"version":3,"sources":["TagNav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TagNav.vue","sourceRoot":"src/components/layout","sourcesContent":["<template>\r\n    <div class=\"tag-nav\">\r\n\r\n                <scroll-bar ref=\"scrollBar\">\r\n<!--                {{openedPageList}}-->\r\n\r\n    <!--    <router-link ref=\"tag\" class=\"tag-nav-item\" :class=\"isActive(item) ? 'cur' : ''\"\r\n                     v-for=\"(item, index) in openedPageList\"\r\n                     :to=\"item.path\" :key=\"index\">\r\n            {{item.title}}\r\n            <i class=\"el-icon-circle-close\"  @click.prevent.stop=\"closeTheTag(item, index)\"></i>\r\n        </router-link>-->\r\n\r\n                    <div ref=\"tag\" class=\"tag-nav-item\" :class=\"isActive(item) ? 'cur' : ''\"\r\n                                 v-for=\"(item, index) in openedPageList\" :to=\"item.path\" :key=\"index\"\r\n                            :Path=\"item.path\" @click=\"reloadRouter($event)\">\r\n                        {{item.title}}\r\n                        <i class=\"el-icon-circle-close\"  @click.prevent.stop=\"closeTheTag(item, index)\"></i>\r\n                    </div>\r\n\r\n        <!--        <li class=\"tags-li\" v-for=\"(item,index) in tagsList\" :class=\"{'active': isActive(item.path)}\" :key=\"index\">-->\r\n        <!--            <router-link :to=\"item.path\" class=\"tags-li-title\">-->\r\n        <!--                {{item.title}}-->\r\n        <!--            </router-link>-->\r\n        <!--            <span class=\"tags-li-icon\" @click=\"closeTags(index)\"><i class=\"el-icon-close\"></i></span>-->\r\n        <!--        </li>-->\r\n                </scroll-bar>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import ScrollBar from './ScrollBar'\r\n    import {mapState,mapActions, mapGetters} from 'vuex'\r\n    export default {\r\n        data(){\r\n            return {\r\n                defaultPage: '/index'\r\n            }\r\n        },\r\n        computed: {\r\n\r\n            ...mapState('StoreActiveNav',[ //用mapGetters来获取collection.js里面的getters\r\n                'openedPageList',\r\n            ]),\r\n\r\n            tagNavList(){\r\n                return this.$store.state.StoreActiveNav.openedPageList\r\n            }\r\n        },\r\n        mounted(){\r\n            // 首次加载时将默认页面加入缓存\r\n            this.addTagNav();\r\n\r\n\r\n        },\r\n        created() {\r\n            // this.$router.go(0);\r\n        },\r\n        watch: {\r\n            $route(){\r\n                this.addTagNav();\r\n                // this.scrollToCurTag()\r\n            }\r\n        },\r\n        methods: {\r\n\r\n            /*路由跳转 刷新*/\r\n            reloadRouter(e) {\r\n                let path = e.target.getAttribute('Path');\r\n                console.log(path);\r\n                this.$router.replace({\r\n                    path: \"/redirect\",\r\n                    query: {\r\n                        nextPath: path\r\n                    }\r\n                });\r\n            },\r\n\r\n            // reloadRouter(e){\r\n            //     let Path = e.target.getAttribute('Path');\r\n            //     console.log(Path);\r\n            //     this.$router.push({path:Path});\r\n            //     this.$forceUpdate();\r\n            // },\r\n\r\n            addTagNav(){\r\n                // 如果需要缓存则必须使用组件自身的name，而不是router的name\r\n                this.$store.commit(\"StoreActiveNav/addTagNav\", {\r\n                    name: this.$router.name,\r\n                    path: this.$route.path,\r\n                    title: this.$route.meta.title\r\n                })\r\n            },\r\n            isActive(item){\r\n                return item.path === this.$route.path\r\n            },\r\n            closeTheTag(item, index){\r\n                // 当关闭当前页面的Tag时，则自动加载前一个Tag所属的页面\r\n                // 如果没有前一个Tag，则加载默认页面\r\n\r\n                console.log(item);\r\n                console.log(index);\r\n                console.log(this.tagNavList);\r\n\r\n                this.$store.commit(\"StoreActiveNav/removeTagNav\", item)\r\n                if(this.$route.path == item.path){\r\n                    if(index){\r\n                        this.$router.push(this.tagNavList[index-1].path)\r\n                    } else {\r\n                        this.$router.push(this.defaultPage);\r\n                        if(this.$route.path == \"/index\"){\r\n                            this.addTagNav()\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            scrollToCurTag(){\r\n                this.$nextTick(() =>{\r\n                    for (let item of this.$refs.tag) {\r\n                        if (item.to === this.$route.path) {\r\n                            this.$refs.scrollBar.scrollToCurTag(item.$el)\r\n                            break\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        components: {ScrollBar}\r\n    }\r\n</script>\r\n"]}]}