{"remainingRequest":"E:\\Project\\chowder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Project\\chowder\\src\\views\\Reception\\Receptionindex.vue?vue&type=style&index=0&id=31b6bf7d&lang=scss&scoped=true&","dependencies":[{"path":"E:\\Project\\chowder\\src\\views\\Reception\\Receptionindex.vue","mtime":1578293558789},{"path":"E:\\Project\\chowder\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Project\\chowder\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\Project\\chowder\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\Project\\chowder\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Project\\chowder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Project\\chowder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnVwbG9hZC1ib3ggewogICAgLmF2YXRhci11cGxvYWRlci1ib3ggewogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICBsaW5lLWhlaWdodDogMDsKICAgICAgICB3aWR0aDogZml0LWNvbnRlbnQ7IC8vICDmlLbnvKnkuI7ljIXoo7ks5pS257yp5Yiw5ZCI6YCCCiAgICAgICAgbWF4LXdpZHRoOiA0MDBweDsKICAgICAgICAuYXZhdGFyLXVwbG9hZGVyIHsKICAgICAgICAgICAgIC5lbC11cGxvYWQgewogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNDA5ZWZmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAuYXZhdGFyLXVwbG9hZGVyLWljb24gewogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICAgICAgY29sb3I6ICM4YzkzOWQ7CiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDE3OHB4OwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxNzhweDsKICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxNzhweDsKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAuYXZhdGFyIHsKICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTc4cHg7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAucHJvZ3Jlc3MtYm94IHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgIHotaW5kZXg6IDI7CiAgICAgICAgICAgIHdpZHRoOiA5OSU7CiAgICAgICAgICAgIGhlaWdodDogOTklOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICB9CgogICAgICAgIC5hdmF0YXItdXBsb2FkZXItcG9wdXAgewogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgei1pbmRleDogMjsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgkY29sb3I6ICMwMDAwMDAsICRhbHBoYTogMC41KTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgICAgICBmb250LXNpemU6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgICAgaSB7CiAgICAgICAgICAgICAgICB3aWR0aDogMzAlOwogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICAgICAgcGFkZGluZzogMCA1JTsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["Receptionindex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Receptionindex.vue","sourceRoot":"src/views/Reception","sourcesContent":["<template>\r\n    <div class=\"upload-box\">\r\n        <div class=\"avatar-uploader-box\">\r\n            <!-- 方框样式 -->\r\n            <el-upload ref=\"avatarUploader\"\r\n                       class=\"avatar-uploader\"\r\n                       :action=\"actionUrl\"\r\n                       :show-file-list=\"false\"\r\n                       :on-change=\"handleAvatarChange\"\r\n                       :auto-upload=\"false\"\r\n                       accept=\"image/*\"\r\n                       v-if=\"type==='avatar' && !imageUrl\">\r\n        <span v-loading=\"loading\"\r\n              element-loading-text=\"上传中\"\r\n              element-loading-spinner=\"el-icon-loading\"\r\n              element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n              style=\"line-height:30px;\"\r\n              v-if=\"!imageUrl\">\r\n          <i class=\"el-icon-plus avatar-uploader-icon\"></i></span>\r\n            </el-upload>\r\n\r\n            <!-- 上传的图片 -->\r\n            <img v-if=\"imageUrl\"\r\n                 v-lazy=\"imageUrl\"\r\n                 :src=\"imageUrl\"\r\n                 class=\"avatar\"\r\n                 @mouseover.stop=\"isShowPopup = true\" />\r\n\r\n            <!-- 显示查看和删除的按钮弹窗 -->\r\n            <div class=\"avatar-uploader-popup\"\r\n                 v-show=\"imageUrl && isShowPopup\"\r\n                 @mouseleave=\"isShowPopup = false\">\r\n                <i class=\"el-icon-zoom-in\"\r\n                   @click=\"dialogVisible = true\"></i>\r\n                <i class=\"el-icon-delete\"\r\n                   @click=\"delImageUrl\"></i>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 查看大图 -->\r\n        <el-dialog title=\"图片查看\"\r\n                   center\r\n                   :visible.sync=\"dialogVisible\"\r\n                   append-to-body>\r\n            <img width=\"100%\"\r\n                 :src=\"imageUrl\"\r\n                 alt />\r\n        </el-dialog>\r\n\r\n        <!-- 裁剪图片 start-->\r\n        <vue-cropper-item ref=\"VueCropperItem\"\r\n                          @confirm=\"confirmCropper\" />\r\n        <!-- 裁剪图片 end-->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\n    import {VueCropper} from VueCropper\r\n    \r\n    export default {\r\n        name:'Receptionindex',\r\n        components: {\r\n            VueCropper,\r\n        },\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                default: 'avatar'\r\n            },\r\n            url: {\r\n                type: String,\r\n                default: ''\r\n            },\r\n            autoCropWidth: {\r\n                type: Number,\r\n                default: 275\r\n            },\r\n            autoCropHeight: {\r\n                type: Number,\r\n                default: 206\r\n            },\r\n            fixedBox: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            isCompress: {  //是否压缩\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            compress: {  //压缩率\r\n                type: String,\r\n                default: '0.8'\r\n            },\r\n        },\r\n        data () {\r\n            return {\r\n                loading: false,\r\n                isShowPopup: false,\r\n                dialogVisible: false,\r\n                isProgress: false,\r\n                percentage: 0,\r\n                imageUrl: '',\r\n                actionUrl: `${url.default.apiURL}/sys/oss/upload`,\r\n            }\r\n        },\r\n        created () {\r\n            this.imageUrl = this.url;\r\n        },\r\n        methods: {\r\n            // 上传之前\r\n            beforeAvatarUpload (file) {\r\n                return new Promise((resolve, reject) => {\r\n                    if (!/\\.(jpg|jpeg|png|JPG|PNG)$/.test(file.name)) {\r\n                        return reject('上传图片只能是JPG或PNG格式!');\r\n                    }\r\n\r\n                    if (file.size > 5 * 1024 * 1024) {\r\n                        return reject('上传图片大小不能超过5M!');\r\n                    }\r\n\r\n                    resolve(\"符合表單規則\");\r\n                });\r\n            },\r\n\r\n            // 上传改变\r\n            async handleAvatarChange (file, fileList) {\r\n                try {\r\n                    await this.beforeAvatarUpload(file)\r\n                    // console.log('上传改变', file)\r\n                    this.showVueCropperItem(file)\r\n\r\n                } catch (e) {\r\n                    this.$message.warning(JSON.stringify(e))\r\n                }\r\n            },\r\n\r\n            // 上传图片接口\r\n            async uploadOssApi (data) {\r\n                try {\r\n                    let params = new FormData()\r\n                    params.append('file', data)\r\n\r\n                    const res = await uploadOss(params)\r\n\r\n                    this.imageUrl = res.data.url;\r\n                    this.isProgress = false\r\n                    this.$emit('change', res.data.url)\r\n                } catch (err) {\r\n                    this.$message.error('上传失败')\r\n                    this.imageUrl = ''\r\n                    this.isProgress = false\r\n                    this.$emit('change', '')\r\n                }\r\n            },\r\n\r\n            // 删除图片\r\n            delImageUrl () {\r\n                this.imageUrl = ''\r\n                this.$emit('change', '')\r\n            },\r\n\r\n            // 显示裁剪框\r\n            showVueCropperItem (file) {\r\n                this.$refs.VueCropperItem.init()\r\n                this.$refs.VueCropperItem.fileName = file.name;\r\n\r\n                this.$refs.VueCropperItem.options.img = URL.createObjectURL(file.raw);\r\n                this.setVueCropperOptions()\r\n            },\r\n\r\n            // 确认裁剪后上传\r\n            async confirmCropper (file) {\r\n                this.loading = true\r\n                await this.uploadOssApi(file)\r\n                this.loading = false\r\n            },\r\n\r\n            // 设置裁剪的配置\r\n            setVueCropperOptions () {\r\n                this.$refs.VueCropperItem.options.autoCropWidth = this.autoCropWidth;\r\n                this.$refs.VueCropperItem.options.autoCropHeight = this.autoCropHeight;\r\n                this.$refs.VueCropperItem.options.fixedBox = this.fixedBox;\r\n\r\n                this.$refs.VueCropperItem.isCompress = this.isCompress; //是否压缩图片\r\n                this.$refs.VueCropperItem.compress = this.compress //压缩率\r\n            },\r\n\r\n        },\r\n        watch: {\r\n            url () {\r\n                this.imageUrl = this.url;\r\n            }\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n    .upload-box {\r\n        .avatar-uploader-box {\r\n            position: relative;\r\n            line-height: 0;\r\n            width: fit-content; //  收缩与包裹,收缩到合适\r\n            max-width: 400px;\r\n            .avatar-uploader {\r\n                 .el-upload {\r\n                    border: 1px dashed #d9d9d9;\r\n                    border-radius: 6px;\r\n                    cursor: pointer;\r\n                    position: relative;\r\n                    overflow: hidden;\r\n                    &:hover {\r\n                        border-color: #409eff;\r\n                    }\r\n                }\r\n\r\n                .avatar-uploader-icon {\r\n                    font-size: 28px;\r\n                    color: #8c939d;\r\n                    min-width: 178px;\r\n                    height: 178px;\r\n                    line-height: 178px;\r\n                    text-align: center;\r\n                }\r\n                .avatar {\r\n                    min-width: 178px;\r\n                    display: block;\r\n                }\r\n            }\r\n            .progress-box {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                z-index: 2;\r\n                width: 99%;\r\n                height: 99%;\r\n                background: #fff;\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n            }\r\n\r\n            .avatar-uploader-popup {\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                z-index: 2;\r\n                width: 100%;\r\n                height: 100%;\r\n                background: rgba($color: #000000, $alpha: 0.5);\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                color: #fff;\r\n                font-size: 20px;\r\n                border-radius: 6px;\r\n                i {\r\n                    width: 30%;\r\n                    text-align: center;\r\n                    padding: 0 5%;\r\n                    font-size: 24px;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\r\n"]}]}